<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <title>baettig.dev</title>
    <meta name="description" content="Personal website of yoggu" />
    <meta name="keywords" content="baettig, dev, portfolio, javascript" />
    <meta name="author" content="yoggu" />
    <meta name="robots" content="index, follow" />
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: black;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const text = "baettig.dev";
      const fontSize = 120;
      let particles = [];

      function createParticles() {
        const tempCanvas = document.createElement("canvas");
        const tempCtx = tempCanvas.getContext("2d");
        tempCanvas.width = canvas.width;
        tempCanvas.height = canvas.height;

        tempCtx.fillStyle = "white";
        tempCtx.font = `${fontSize}px Arial`;
        tempCtx.textAlign = "center";
        tempCtx.textBaseline = "middle";
        tempCtx.fillText(text, canvas.width / 2, canvas.height / 2);

        const imageData = tempCtx.getImageData(
          0,
          0,
          canvas.width,
          canvas.height
        );
        const data = imageData.data;

        for (let y = 0; y < canvas.height; y += 4) {
          for (let x = 0; x < canvas.width; x += 4) {
            const index = (y * canvas.width + x) * 4;
            if (data[index] > 128) {
              particles.push(new Particle(x, y));
            }
          }
        }
      }

      class Particle {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          this.baseX = x;
          this.baseY = y;
          this.vx = 0;
          this.vy = 0;
          this.alpha = 1;
          this.turbulence = 0.2;
          this.friction = 0.999;
        }

        update(mouse) {
          const dx = this.x - mouse.x;
          const dy = this.y - mouse.y;
          const distance = Math.sqrt(dx ** 2 + dy ** 2);

          if (distance < 50) {
            let force = (50 - distance) / 50;
            this.vx += (dx / distance) * force;
            this.vy += (dy / distance) * force;

            this.vx += (Math.random() - 0.5) * this.turbulence;
            this.vy += (Math.random() - 0.5) * this.turbulence;
          }

          this.vx *= this.friction;
          this.vy *= this.friction;

          this.x += this.vx;
          this.y += this.vy;

          const distLeft = this.x;
          const distRight = canvas.width - this.x;
          const distTop = this.y;
          const distBottom = canvas.height - this.y;

          const minDist = Math.min(distLeft, distRight, distTop, distBottom);

          if (minDist < 200) {
            this.alpha = minDist / 200;
            if (this.alpha < 0) this.alpha = 0;
          }
        }

        draw() {
          ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      let mouse = {
        x: null,
        y: null,
      };

      window.addEventListener("mousemove", (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
      });

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particles.forEach((particle) => {
          particle.update(mouse);
          particle.draw();
        });

        requestAnimationFrame(animate);
      }

      createParticles();
      animate();
    </script>
  </body>
</html>
